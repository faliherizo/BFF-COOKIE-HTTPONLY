<div class="notifications-page li-container">
  <div class="notifications-layout">
    <main class="notifications-main">
      <div class="li-card notifications-card">
        <div class="notifications-header">
          <h3>Notifications</h3>
        </div>

        <div class="notifications-loading" *ngIf="loading">
          <mat-spinner diameter="40"></mat-spinner>
        </div>

        <div class="notifications-list" *ngIf="!loading">
          <div
            *ngFor="let notif of notifications"
            class="notification-item"
            [class.unread]="!notif.read"
            (click)="markAsRead(notif)"
          >
            <div class="notification-icon-wrapper">
              <img [src]="notif.actor.avatar" [alt]="notif.actor.name" class="notification-avatar" />
              <span class="notification-type-badge" [style.background-color]="getTypeColor(notif.type)">
                <mat-icon>{{ getTypeIcon(notif.type) }}</mat-icon>
              </span>
            </div>
            <div class="notification-content">
              <p class="notification-message">{{ notif.message }}</p>
              <span class="notification-time">{{ timeAgo(notif.timestamp) }}</span>
            </div>
            <span class="unread-dot" *ngIf="!notif.read"></span>
          </div>

          <div *ngIf="notifications.length === 0" class="notifications-empty">
            <mat-icon>notifications_off</mat-icon>
            <h4>Aucune notification</h4>
            <p>Vous êtes à jour ! Revenez plus tard pour voir les nouvelles activités.</p>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
